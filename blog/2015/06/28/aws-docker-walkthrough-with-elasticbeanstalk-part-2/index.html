
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>AWS Docker Walkthrough With ElasticBeanstalk: Part 2 - Ian Blenke - DevOps</title>
  <meta name="author" content="Ian Blenke">

  
  <meta name="description" content="While deploying docker containers for immutable infrastructure on AWS ElasticBeanstalk,
I’ve learned a number of useful tricks that go beyond the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ian.blenke.com/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ian Blenke - DevOps" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53218787-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  
      <img style="float: left; margin: 0px 15px 15px 0px;" src="http://www.gravatar.com/avatar/b0efd275b44b660f817003f2baca7ea2" alt="Gravatar of Ian Blenke " title="Gravatar of Ian Blenke" />
  
  <h1><a href="/">Ian Blenke - DevOps</a></h1>
  
    <h2>A 6502 hack living in a cloud orchestration world</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="https://github.com/ianblenke">GitHub</a></li>
  <li><a href="https://registry.hub.docker.com/repos/ianblenke/">DockerHub</a></li>
  <li><a href="https://twitter.com/ianblenke">Twitter</a></li>
  <li><a href="https://www.linkedin.com/in/ianblenke/">LinkedIn</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">AWS Docker Walkthrough With ElasticBeanstalk: Part 2</h1>
    
    
      <p class="meta">
        








  


Jun 28, 2015
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://ian.blenke.com">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>While deploying docker containers for immutable infrastructure on AWS ElasticBeanstalk,
I’ve learned a number of useful tricks that go beyond the official Amazon documentation.</p>

<p>This series of posts are an attempt to summarize some of the useful bits that may benefit
others facing the same challenges.</p>

<hr />

<p>Previously: <a href="/blog/2015/06/27/aws-docker-walkthrough-with-elasticbeanstalk-part-1/">Part 1 : Preparing a VPC for your ElasticBeanstalk environments</a></p>

<hr />

<h1 id="part-2--creating-your-elasticbeanstalk-environment">Part 2 : Creating your ElasticBeanstalk environment</h1>

<hr />

<h3 id="step-1-create-your-application-in-aws">Step 1: Create your Application in AWS</h3>

<p>Each AWS account needs to have your ElasticBeanstalk application defined initially.</p>

<p>Operationally, there are few reasons to remove an application from an AWS account, so there’s a good bet it’s already there.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">aws elasticbeanstalk create-application <span class="se">\</span>
</span><span class="line">  --profile aws-dev <span class="se">\</span>
</span><span class="line">  --region us-east-1 <span class="se">\</span>
</span><span class="line">  --application-name myapp <span class="se">\</span>
</span><span class="line">  --description <span class="s1">&#39;My Application&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You should really only ever have to do this once per AWS account.</p>

<p>There is an example of this in the Makefile as the <code>make application</code> target.</p>

<h3 id="step-2--update-your-aws-development-environment">Step 2 : Update your AWS development environment.</h3>

<p>During our initial VPC creation, we used the <code>aws</code> command from the <code>awscli</code> python package.</p>

<p>When deploying ElasticBeanstalk applications, we use the <code>eb</code> command from the <code>awsebcli</code> python package.</p>

<p>On OS/X, we run:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">brew install awsebcli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>On Windows, chocolatey doesn’t have awsebcli, but we can install python pip:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">choco install pip
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Again, because <code>awsebcli</code> is a python tool, we can install with:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">pip install awscli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You may (or may not) need to prefix that pip install with <code>sudo</code> on linux/unix flavors, depending. ie:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">sudo pip install awsebcli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>These tools will detect if they are out of date when you run them. You may eventually get a message like:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">Alert: An update to this CLI is available.
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>When this happens, you will likely want to either upgrade via homebrew:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">brew update <span class="p">&amp;</span> brew upgrade awsebcli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>or, more likely, upgrade using pip directly:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">pip install --upgrade awsebcli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Again, you may (or may not) need to prefix that pip install with <code>sudo</code>, depending. ie:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">sudo pip install --upgrade awsebcli
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>There really should be an awsebcli Docker image, but there presently is not. Add that to the list of images to build.</p>

<h3 id="step-3-create-a-ssh-key-pair-to-use">Step 3: Create a ssh key pair to use</h3>

<p>Typically you will want to generate an ssh key locally and upload the public part:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">ssh-keygen -t rsa -b <span class="m">2048</span> -f ~/.ssh/myapp-dev -P <span class="s1">&#39;&#39;</span>
</span><span class="line">aws ec2 import-key-pair --key-name myapp-dev --public-key-material <span class="s2">&quot;$(cat ~/.ssh/myapp-dev.pub)&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Alternatively, if you are on a development platform without ssh-keygen for some reason, you can have AWS generate it for you:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">aws ec2 create-key-pair --key-name cosmos-dev &gt; ~/.ssh/id_rsa-cosmos-dev
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The downside to the second method is that AWS has the private key (as they generated it, and you shipped it via https over the network to your local machine), whereas in the first example they do not.</p>

<p>This ssh key can be used to access AWS instances directly.</p>

<p>After creating this ssh key, it is probably a good idea that you add it to your team’s password management tool (Keepass, Hashicorp Vault, Trousseau, Ansible Vault, Chef Encrypted Databags, LastPass, 1Password, Dashlane, etc) so that the private key isn’t only on your development workstation in your local user account.</p>

<p>Note the naming convention of <code>~/.ssh/$(PROJECT)-$(ENVIRONMENT)</code> - this is the default key filename that <code>eb ssh</code> will use.</p>

<p>If you do not use the above naming convention, you will have to add the generated ssh private key to your ssh-agent’s keychain in order to use it:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">[</span> -n <span class="nv">$SSH_AUTH_SOCK</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">eval</span> <span class="k">$(</span>ssh-agent<span class="k">)</span>
</span><span class="line">ssh-add ~/.ssh/myapp-dev
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To list the ssh keys in your keychain, use:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">ssh-add -l
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So long as you see 4 or fewer keys, including they key you created above, you should be ok.</p>

<p>If you have more than 4 keys listed in your ssh-agent keychain, depending on the order they are tried by your ssh client, that may exceed the default number of ssh key retries allowed on the remote sshd server side, which will prevent you from connecting.</p>

<p>Now we should have an ssh key pair defined in AWS that we can use when spinning up instances.</p>

<h3 id="step-4-initialize-your-local-development-directory-for-the-eb-cli">Step 4: Initialize your local development directory for the eb cli</h3>

<p>Before using the <code>eb</code> command, you must <code>eb init</code> your project to create a <code>.elasticbeanstalk/config.yml</code> file:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">eb init --profile aws-dev
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The <code>--profile aws-dev</code> is optional, if you created profiles in your <code>~/.aws/config</code> file. If you are using AWS environment variables your your ACCESS/SECRET keys, or only one default AWS account, you may omit that.</p>

<p>The application must exist in AWS first, which is why this is run <em>after</em> the previous step of creating the Application in AWS.</p>

<p>You may be prompted for some critical bits:</p>

<pre><code>$ eb init --profile aws-dev
eb init --profile aws-dev

Select a default region
1) us-east-1 : US East (N. Virginia)
2) us-west-1 : US West (N. California)
3) us-west-2 : US West (Oregon)
4) eu-west-1 : EU (Ireland)
5) eu-central-1 : EU (Frankfurt)
6) ap-southeast-1 : Asia Pacific (Singapore)
7) ap-southeast-2 : Asia Pacific (Sydney)
8) ap-northeast-1 : Asia Pacific (Tokyo)
9) sa-east-1 : South America (Sao Paulo)
(default is 3): 1

Select an application to use
1) myapp
2) [ Create new Application ]
(default is 2): 1

Select a platform.
1) PHP
2) Node.js
3) IIS
4) Tomcat
5) Python
6) Ruby
7) Docker
8) Multi-container Docker
9) GlassFish
10) Go
(default is 1): 7

Select a platform version.
1) Docker 1.6.2
2) Docker 1.6.0
3) Docker 1.5.0
(default is 1): 1
Do you want to set up SSH for your instances?
(y/n): y

Select a keypair.
1) myapp-dev
2) [ Create new KeyPair ]
(default is 2): 1
</code></pre>

<p>Alternatively, to avoid the questions, you can specify the full arguments:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">eb init myapp --profile aws-dev --region us-east-1 -p <span class="s1">&#39;Docker 1.6.2&#39;</span> -k myapp-dev
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The end result is a <code>.elasticbeanstalk/config.yml</code> that will look something like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="yaml"><span class="line"><span class="l-Scalar-Plain">branch-defaults</span><span class="p-Indicator">:</span>
</span><span class="line">  <span class="l-Scalar-Plain">master</span><span class="p-Indicator">:</span>
</span><span class="line">    <span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>
</span><span class="line"><span class="l-Scalar-Plain">global</span><span class="p-Indicator">:</span>
</span><span class="line">  <span class="l-Scalar-Plain">application_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myapp</span>
</span><span class="line">  <span class="l-Scalar-Plain">default_ec2_keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myapp-dev</span>
</span><span class="line">  <span class="l-Scalar-Plain">default_platform</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Docker 1.6.2</span>
</span><span class="line">  <span class="l-Scalar-Plain">default_region</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">us-east-1</span>
</span><span class="line">  <span class="l-Scalar-Plain">profile</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws-dev</span>
</span><span class="line">  <span class="l-Scalar-Plain">sc</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">git</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Any field appearing as <code>null</code> will likely need some manual attention from you after the next step.</p>

<h3 id="step-5-create-the-elasticbeanstalk-environment">Step 5: Create the ElasticBeanstalk Environment</h3>

<p>Previously, in <a href="/blog/2015/06/27/aws-docker-walkthrough-with-elasticbeanstalk-part-1/">Part 1 : Preparing a VPC for your ElasticBeanstalk environments</a>, we generated a VPC using a CloudFormation with an output of the Subnets and Security Group. We will need those things below.</p>

<p>Here is a repeat of that gist:</p>

<div><script src="https://gist.github.com/59715079304a6db7182c.js"></script>
<noscript><pre><code>aws cloudformation describe-stacks --stack-name myapp-dev --profile aws-dev --region us-east-1 | jq -r &#39;.Stacks[].Outputs&#39;
[
  {
    &quot;Description&quot;: &quot;VPC Id&quot;,
    &quot;OutputKey&quot;: &quot;VpcId&quot;,
    &quot;OutputValue&quot;: &quot;vpc-b7d1d8d2&quot;
  },
  {
    &quot;Description&quot;: &quot;VPC&quot;,
    &quot;OutputKey&quot;: &quot;VPCDefaultNetworkAcl&quot;,
    &quot;OutputValue&quot;: &quot;acl-b3cfc7d6&quot;
  },
  {
    &quot;Description&quot;: &quot;VPC Default Security Group that we blissfully ignore thanks to self-referencing bugs&quot;,
    &quot;OutputKey&quot;: &quot;VPCDefaultSecurityGroup&quot;,
    &quot;OutputValue&quot;: &quot;sg-3e50a559&quot;
  },
  {
    &quot;Description&quot;: &quot;VPC Security Group created by this stack&quot;,
    &quot;OutputKey&quot;: &quot;VPCSecurityGroup&quot;,
    &quot;OutputValue&quot;: &quot;sg-0c50a56b&quot;
  },
  {
    &quot;Description&quot;: &quot;The subnet id for VPCSubnet0&quot;,
    &quot;OutputKey&quot;: &quot;VPCSubnet0&quot;,
    &quot;OutputValue&quot;: &quot;subnet-995236b2&quot;
  },
  {
    &quot;Description&quot;: &quot;The subnet id for VPCSubnet1&quot;,
    &quot;OutputKey&quot;: &quot;VPCSubnet1&quot;,
    &quot;OutputValue&quot;: &quot;subnet-6aa4fd1d&quot;
  },
  {
    &quot;Description&quot;: &quot;The subnet id for VPCSubnet2&quot;,
    &quot;OutputKey&quot;: &quot;VPCSubnet2&quot;,
    &quot;OutputValue&quot;: &quot;subnet-ad3644f4&quot;
  }
]</code></pre></noscript></div>

<p>There are two ways to create a new ElasticBeanstalk environment:</p>

<ul>
  <li>Using <code>eb create</code> with full arguments for the various details of the environment.</li>
  <li>Using <code>eb create</code> with a <code>--cfg</code> argument of a previous <code>eb config save</code> to a YAML file in <code>.elasticbeanstalk/saved_configs</code>.</li>
</ul>

<p>The first way looks something like this:</p>

<pre><code>eb create myapp-dev --verbose \
  --profile aws-dev \
  --tier WebServer \
  --cname myapp-dev \
  -p '64bit Amazon Linux 2015.03 v1.4.3 running Docker 1.6.2' \
  -k myapp-dev \
  -ip myapp-dev-InstanceProfile-1KCQJP9M5TSVZ \
  --tags Project=myapp,Environment=dev \
  --envvars DEBUG=info \
  --vpc.ec2subnets=subnet-995236b2,subnet-6aa4fd1d,subnet-ad3644f4 \
  --vpc.elbsubnets=subnet-995236b2,subnet-6aa4fd1d,subnet-ad3644f4 \
  --vpc.publicip --vpc.elbpublic --vpc.securitygroups=sg-0c50a56b
</code></pre>

<p>The <code>Makefile</code> has an <code>environment</code> target that removes the need to fill in the fields manually:</p>

<pre><code>outputs:
    @which jq &gt; /dev/null 2&gt;&amp;1 || ( which brew &amp;&amp; brew install jq || which apt-get &amp;&amp; apt-get install jq || which yum &amp;&amp; yum install jq || which choco &amp;&amp; choco install jq)
    @aws cloudformation describe-stacks --stack-name myapp-dev --profile aws-dev --region us-east-1 | jq -r '.Stacks[].Outputs | map({key: .OutputKey, value: .OutputValue}) | from_entries'

environment:
    eb create $(STACK) --verbose \
      --profile aws-dev \
      --tier WebServer \
      --cname $(shell whoami)-$(STACK) \
      -p '64bit Amazon Linux 2015.03 v1.4.3 running Docker 1.6.2' \
      -k $(STACK) \
      -ip $(shell make outputs | jq -r .InstanceProfile) \
      --tags Project=$(PROJECT),Environment=$(ENVIRONMENT) \
      --envvars DEBUG=info \
      --vpc.ec2subnets=$(shell make outputs | jq -r '[ .VPCSubnet0, .VPCSubnet1, .VPCSubnet2 ] | @csv') \
      --vpc.elbsubnets=$(shell make outputs | jq -r '[ .VPCSubnet0, .VPCSubnet1, .VPCSubnet2 ] | @csv') \
      --vpc.publicip --vpc.elbpublic \
      --vpc.securitygroups=$(shell make outputs | jq -r .VPCSecurityGroup)
</code></pre>

<p>On the other hand, after a quick config save:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">eb config save myapp-dev --profile aws-dev --region us-east-1 --cfg myapp-dev-sc
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We now have the above settings in a YAML file <code>.elasticbeanstalk/saved_configs/myapp-dev-sc.cfg.yml</code> which can be committed to our git project.</p>

<p>This leads to the second way to create an ElasticBeanstalk environment:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">eb create myapp-dev --cname myapp-dev --cfg myapp-dev-sc --profile aws-dev
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The flip side of that is the YAML save config has static values embedded in it for a specific deployed VPC.</p>

<p>More docker goodness to come in Part 3…</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ian Blenke</span></span>

      








  


<time datetime="2015-06-28T00:57:08-04:00" pubdate data-updated="true">Jun 28, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/amazon/'>amazon</a>, <a class='category' href='/blog/categories/aws/'>aws</a>, <a class='category' href='/blog/categories/cloudformation/'>cloudformation</a>, <a class='category' href='/blog/categories/docker/'>docker</a>, <a class='category' href='/blog/categories/ebextensions/'>ebextensions</a>, <a class='category' href='/blog/categories/ecs/'>ecs</a>, <a class='category' href='/blog/categories/elasticbeanstalk/'>elasticbeanstalk</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://ian.blenke.com/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2/" data-via="ianblenke" data-counturl="http://ian.blenke.com/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/06/27/aws-docker-walkthrough-with-elasticbeanstalk-part-1/" title="Previous Post: AWS Docker Walkthrough with ElasticBeanstalk: Part 1">&laquo; AWS Docker Walkthrough with ElasticBeanstalk: Part 1</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

  <aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ian.blenke.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    
<section>
	<span>
		<img src="http://www.gravatar.com/avatar/b0efd275b44b660f817003f2baca7ea2" alt="Gravatar of Ian Blenke " title="Gravatar of Ian Blenke" />
	</span>
</section>
<section>
  <h1>About Me</h1>
  <p>Ian is a Senior DevOps Engineer at MalwareBytes</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2/">AWS Docker Walkthrough With ElasticBeanstalk: Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/27/aws-docker-walkthrough-with-elasticbeanstalk-part-1/">AWS Docker Walkthrough With ElasticBeanstalk: Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/10/deploying-amazon-ecs-on-coreos/">Deploying Amazon ECS on CoreOS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/10/docker-rspec-tdd/">Docker Rspec TDD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/09/openstack-on-a-chromebox/">OpenStack on a Chromebox</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/ianblenke">@ianblenke</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ianblenke',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+IanBlenke?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
  <script src="/javascripts/google-tracking.js" type="text/javascript"> </script>
</section>



  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Ian Blenke -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>.
  <span class="credit">Get the source for this blog at <a href="https://github.com/ianblenke/blog/tree/source">github.com/ianblenke/blog/tree/source<a/></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ianblenke';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ian.blenke.com/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2/';
        var disqus_url = 'http://ian.blenke.com/blog/2015/06/28/aws-docker-walkthrough-with-elasticbeanstalk-part-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>
